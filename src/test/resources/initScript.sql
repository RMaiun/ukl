ALTER DATABASE cata CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;
# ---------------------------------------
use cata;
create table if not exists player
(
    id      bigint primary key auto_increment,
    surname varchar(20) not null
);
ALTER TABLE player
    CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;


create index player_id_idx on player (id);
create index player_surname_idx on player (surname);

create table if not exists season
(
    id   bigint primary key auto_increment,
    name varchar(20) not null
);
ALTER TABLE season
    CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

create index season_id_idx on season (id);


create table if not exists round
(
    id         bigint primary key auto_increment,
    winner1_id bigint    not null,
    winner2_id bigint    not null,
    loser1_id  bigint    not null,
    loser2_id  bigint    not null,
    shutout    boolean default false,
    season_id  bigint    not null,
    created    timestamp not null,
    foreign key fk_win1 (winner1_id) references player (id),
    foreign key fk_win2 (winner2_id) references player (id),
    foreign key fk_l1 (loser1_id) references player (id),
    foreign key fk_l2 (loser2_id) references player (id),
    foreign key fk_season (season_id) references season (id)
);
ALTER TABLE round
    CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

create index round_id_idx on round (id);

# ---------------------------------------
insert into player (id, surname)
values
(1, 'маюн'),
(2, 'сікорський'),
(3, 'чикуров'),
(4, 'шарга'),
(5, 'кутенський'),
(6, 'ділай'),
(7, 'гундарцев'),
(8, 'тремпольцева'),
(9, 'мельничук'),
(10, 'керея'),
(11, 'камаєв'),
(12, 'балишин'),
(13, 'васьков'),
(14, 'підгурський'),
(15, 'мудрий');
# ---------------------------------------
insert into season (id, name)
values (1, 'S1|2020'),
       (2, 'S2|2020'),
       (3, 'S3|2020');
# ---------------------------------------
# week 1
insert into round (winner1_id, winner2_id, loser1_id, loser2_id, shutout, season_id, created)
values
(1,2,4,12,0,     1,'2020-01-01 08:00:01'),
(1,12,2,4,1,     1,'2020-01-01 08:01:01'),
(1,2,4,12,0,     1,'2020-01-01 08:02:01'),
(2,4,1,12,0,     1,'2020-01-01 08:03:01'),
(4,12,1,2,0,     1,'2020-01-01 08:04:01'),
(2,12,1,4,0,     1,'2020-01-01 08:05:01'),
(1,4,3,12,0,     1,'2020-01-01 08:06:01'),
(1,12,3,4,0,     1,'2020-01-01 08:07:01'),
(3,1,4,12,0,     1,'2020-01-01 08:08:01'),
(1,3,4,2,0,      1,'2020-01-01 08:09:01'),
(1,2,3,4,0,      1,'2020-01-01 08:10:01'),
(1,4,2,3,0,      1,'2020-01-01 08:11:01'),
(2,4,1,3,0,      1,'2020-01-01 08:12:01'),
(1,4,2,12,0,     1,'2020-01-01 08:13:01'),
(1,2,4,12,0,     1,'2020-01-01 08:14:01'),
(2,4,1,12,0,     1,'2020-01-01 08:15:01');

# week 2
insert into round (winner1_id, winner2_id, loser1_id, loser2_id, shutout, season_id, created)
values
(2,4,1,3,0,         1,'2020-01-01 09:01:01'),
(3,2,1,4,0,         1,'2020-01-01 09:02:01'),
(1,2,3,4,0,         1,'2020-01-01 09:03:01'),
(1,3,4,8,0,         1,'2020-01-01 09:04:01'),
(1,8,3,4,0,         1,'2020-01-01 09:05:01'),
(1,3,2,4,0,         1,'2020-01-01 09:06:01'),
(1,2,3,4,0,         1,'2020-01-01 09:07:01'),
(1,4,2,3,0,         1,'2020-01-01 09:08:01'),
(1,4,2,3,0,         1,'2020-01-01 09:09:01'),
(1,2,3,4,0,         1,'2020-01-01 09:10:01'),
(3,4,1,2,0,         1,'2020-01-01 09:11:01'),
(1,3,2,4,0,         1,'2020-01-01 09:12:01'),
(1,2,3,4,0,         1,'2020-01-01 09:13:01'),
(2,3,1,5,0,         1,'2020-01-01 09:14:01'),
(3,5,1,2,0,         1,'2020-01-01 09:15:01'),
(2,5,1,3,0,         1,'2020-01-01 09:16:01'),
(1,2,3,4,0,         1,'2020-01-01 09:17:01'),
(1,4,2,3,0,         1,'2020-01-01 09:18:01'),
(1,3,2,4,0,         1,'2020-01-01 09:19:01'),
(1,4,2,3,0,         1,'2020-01-01 09:20:01'),
(3,4,1,2,0,         1,'2020-01-01 09:21:01'),
(2,4,1,3,0,         1,'2020-01-01 09:22:01'),
(5,6,4,8,0,         1,'2020-01-01 09:23:01'),
(4,5,6,8,0,         1,'2020-01-01 09:24:01'),
(4,6,5,8,0,         1,'2020-01-01 09:25:01'),
(1,2,3,4,0,         1,'2020-01-01 09:26:01'),
(2,3,1,4,0,         1,'2020-01-01 09:27:01'),
(2,4,1,3,0,         1,'2020-01-01 09:28:01'),
(1,3,2,4,0,         1,'2020-01-01 09:29:01'),
(3,4,1,2,0,         1,'2020-01-01 09:30:01'),
(1,4,2,3,0,         1,'2020-01-01 09:31:01'),
(1,4,2,3,1,         1,'2020-01-01 09:32:01'),
(1,3,2,4,0,         1,'2020-01-01 09:33:01'),
(3,4,2,1,0,         1,'2020-01-01 09:34:01'),
(1,3,4,8,0,         1,'2020-01-01 09:35:01'),
(3,4,1,8,0,         1,'2020-01-01 09:36:01'),
(1,4,8,3,0,         1,'2020-01-01 09:37:01');

# week 3
insert into round (winner1_id, winner2_id, loser1_id, loser2_id, shutout, season_id, created)
values
(1,3,2,4,0,         1,'2020-01-01 10:01:01'),
(1,5,2,4,0,         1,'2020-01-01 10:02:01'),
(1,4,2,5,0,         1,'2020-01-01 10:03:01'),
(1,2,4,5,0,         1,'2020-01-01 10:04:01'),
(2,4,1,3,0,         1,'2020-01-01 10:05:01'),
(1,2,3,4,0,         1,'2020-01-01 10:06:01'),
(1,4,2,3,0,         1,'2020-01-01 10:07:01'),
(1,3,2,4,0,         1,'2020-01-01 10:08:01'),
(2,3,1,4,0,         1,'2020-01-01 10:09:01'),
(1,2,3,4,0,         1,'2020-01-01 10:10:01'),
(2,4,1,3,0,         1,'2020-01-01 10:11:01'),
(1,2,3,4,0,         1,'2020-01-01 10:12:01'),
(2,3,1,4,0,         1,'2020-01-01 10:13:01'),
(3,4,1,2,0,         1,'2020-01-01 10:14:01'),
(2,3,1,4,0,         1,'2020-01-01 10:15:01'),
(2,4,1,3,0,         1,'2020-01-01 10:16:01'),
(1,2,3,4,0,         1,'2020-01-01 10:17:01'),
(1,3,2,4,0,         1,'2020-01-01 10:18:01'),
(2,3,1,4,0,         1,'2020-01-01 10:19:01'),
(1,3,2,4,0,         1,'2020-01-01 10:20:01'),
(1,3,2,4,0,         1,'2020-01-01 10:21:01');

# week 4
insert into round (winner1_id, winner2_id, loser1_id, loser2_id, shutout, season_id, created)
values
(1,4,2,3,0,         1,'2020-01-01 11:01:01'),
(1,2,3,4,0,         1,'2020-01-01 11:02:01'),
(3,4,1,7,0,         1,'2020-01-01 11:03:01'),
(3,4,1,2,0,         1,'2020-01-01 11:04:01'),
(3,2,1,4,0,         1,'2020-01-01 11:05:01'),
(2,4,1,3,0,         1,'2020-01-01 11:06:01'),
(3,4,1,2,0,         1,'2020-01-01 11:07:01'),
(1,4,2,3,0,         1,'2020-01-01 11:08:01'),
(2,4,1,3,0,         1,'2020-01-01 11:09:01'),
(3,4,1,2,0,         1,'2020-01-01 11:10:01'),
(1,4,2,3,0,         1,'2020-01-01 11:11:01'),
(2,4,1,3,0,         1,'2020-01-01 11:12:01'),
(3,4,1,5,0,         1,'2020-01-01 11:13:01'),
(1,4,3,5,0,         1,'2020-01-01 11:14:01'),
(1,3,4,5,0,         1,'2020-01-01 11:15:01'),
(1,2,3,4,0,         1,'2020-01-01 11:16:01'),
(1,4,2,3,0,         1,'2020-01-01 11:17:01'),
(1,3,2,4,0,         1,'2020-01-01 11:18:01'),
(1,2,3,4,0,         1,'2020-01-01 11:19:01'),
(1,4,2,3,0,         1,'2020-01-01 11:20:01'),
(1,3,2,4,0,         1,'2020-01-01 11:21:01'),
(2,4,5,6,0,         1,'2020-01-01 11:22:01'),
(2,4,5,6,0,         1,'2020-01-01 11:23:01'),
(5,6,3,4,0,         1,'2020-01-01 11:24:01'),
(3,5,4,6,0,         1,'2020-01-01 11:25:01'),
(3,6,4,5,0,         1,'2020-01-01 11:26:01'),
(1,2,3,4,0,         1,'2020-01-01 11:27:01'),
(2,3,1,4,0,         1,'2020-01-01 11:28:01'),
(2,4,1,3,0,         1,'2020-01-01 11:29:01'),
(2,4,6,10,0,        1,'2020-01-01 11:30:01'),
(2,6,4,10,0,        1,'2020-01-01 11:31:01'),
(4,6,2,10,0,        1,'2020-01-01 11:32:01'),
(3,4,2,5,0,         1,'2020-01-01 11:33:01'),
(2,4,3,5,0,         1,'2020-01-01 11:34:01'),
(4,5,2,3,0,         1,'2020-01-01 11:35:01'),
(1,2,3,4,0,         1,'2020-01-01 11:36:01'),
(2,4,1,3,0,         1,'2020-01-01 11:37:01'),
(1,4,2,3,0,         1,'2020-01-01 11:38:01');

# week 5
insert into round (winner1_id, winner2_id, loser1_id, loser2_id, shutout, season_id, created)
values
(4,5,1,3,0,         1,'2020-01-01 12:01:01'),
(1,4,3,5,0,         1,'2020-01-01 12:02:01'),
(1,5,3,4,0,         1,'2020-01-01 12:03:01'),
(2,3,4,6,0,         1,'2020-01-01 12:04:01'),
(2,4,3,6,0,         1,'2020-01-01 12:05:01'),
(2,6,3,4,0,         1,'2020-01-01 12:06:01'),
(2,3,4,6,0,         1,'2020-01-01 12:07:01'),
(2,4,3,6,0,         1,'2020-01-01 12:08:01'),
(2,6,3,4,0,         1,'2020-01-01 12:09:01'),
(1,3,4,6,0,         1,'2020-01-01 12:10:01'),
(1,4,3,6,0,         1,'2020-01-01 12:11:01'),
(3,4,1,6,0,         1,'2020-01-01 12:12:01'),
(3,4,1,2,0,         1,'2020-01-01 12:13:01'),
(2,3,1,4,0,         1,'2020-01-01 12:14:01'),
(1,3,2,4,0,         1,'2020-01-01 12:15:01'),
(1,6,3,5,0,         1,'2020-01-01 12:16:01'),
(1,5,3,6,0,         1,'2020-01-01 12:17:01'),
(3,6,1,5,0,         1,'2020-01-01 12:18:01'),
(1,2,3,4,0,         1,'2020-01-01 12:19:01'),
(1,4,2,3,0,         1,'2020-01-01 12:20:01'),
(1,3,2,4,0,         1,'2020-01-01 12:21:01'),
(2,3,1,4,0,         1,'2020-01-01 12:22:01'),
(1,2,3,4,0,         1,'2020-01-01 12:23:01'),
(2,4,1,3,0,         1,'2020-01-01 12:24:01'),
(2,6,3,4,0,         1,'2020-01-01 12:25:01'),
(2,4,3,6,0,         1,'2020-01-01 12:26:01'),
(4,6,2,3,0,         1,'2020-01-01 12:27:01'),
(3,4,1,2,0,         1,'2020-01-01 12:28:01'),
(1,4,2,3,0,         1,'2020-01-01 12:29:01'),
(2,4,1,3,0,         1,'2020-01-01 12:30:01'),
(1,2,3,4,0,         1,'2020-01-01 12:31:01'),
(1,3,2,4,0,         1,'2020-01-01 12:32:01'),
(2,3,1,5,0,         1,'2020-01-01 12:33:01'),
(1,2,3,4,0,         1,'2020-01-01 12:34:01'),
(1,3,2,4,0,         1,'2020-01-01 12:35:01'),
(1,4,2,3,0,         1,'2020-01-01 12:36:01'),
(13,14,9,15,0,      1,'2020-01-01 12:37:01'),
(9,13,14,15,0,      1,'2020-01-01 12:38:01'),
(9,14,13,15,0,      1,'2020-01-01 12:39:01'),
(1,3,2,4,0,         1,'2020-01-01 12:40:01'),
(2,3,1,4,0,         1,'2020-01-01 12:41:01'),
(1,2,3,4,0,         1,'2020-01-01 12:42:01'),
(2,4,1,5,0,         1,'2020-01-01 12:43:01'),
(1,4,2,5,0,         1,'2020-01-01 12:44:01'),
(4,5,1,2,0,         1,'2020-01-01 12:45:01'),
(1,5,2,4,0,         1,'2020-01-01 12:46:01'),
(2,5,1,4,0,         1,'2020-01-01 12:47:01'),
(4,5,1,2,0,         1,'2020-01-01 12:48:01');

# week 6
insert into round (winner1_id, winner2_id, loser1_id, loser2_id, shutout, season_id, created)
values
(1,3,4,6,0,         1,'2020-01-01 13:01:01'),
(3,4,1,6,0,         1,'2020-01-01 13:02:01'),
(1,4,3,6,0,         1,'2020-01-01 13:03:01'),
(3,6,1,4,0,         1,'2020-01-01 13:04:01'),
(1,3,4,6,0,         1,'2020-01-01 13:05:01'),
(1,6,3,4,0,         1,'2020-01-01 13:06:01'),
(5,6,9,13,1,        1,'2020-01-01 13:07:01'),
(5,9,6,13,0,        1,'2020-01-01 13:08:01'),
(5,13,6,9,0,        1,'2020-01-01 13:09:01'),
(4,5,1,3,0,         1,'2020-01-01 13:10:01'),
(1,5,3,4,0,         1,'2020-01-01 13:11:01'),
(1,4,3,5,0,         1,'2020-01-01 13:12:01'),
(1,5,3,4,0,         1,'2020-01-01 13:13:01'),
(1,4,3,5,0,         1,'2020-01-01 13:14:01'),
(1,3,4,5,0,         1,'2020-01-01 13:15:01'),
(1,4,3,5,0,         1,'2020-01-01 13:16:01'),
(1,5,3,4,0,         1,'2020-01-01 13:17:01'),
(1,3,4,5,1,         1,'2020-01-01 13:18:01'),
(13,14,6,11,0,      1,'2020-01-01 13:19:01'),
(6,13,11,14,1,      1,'2020-01-01 13:20:01'),
(6,14,11,13,0,      1,'2020-01-01 13:21:01'),
(1,5,3,4,0,         1,'2020-01-01 13:22:01'),
(1,4,3,5,1,         1,'2020-01-01 13:23:01'),
(1,3,4,5,0,         1,'2020-01-01 13:24:01'),
(9,13,14,15,0,      1,'2020-01-01 13:25:01'),
(9,15,13,14,0,      1,'2020-01-01 13:26:01'),
(9,14,13,15,0,      1,'2020-01-01 13:27:01'),
(2,4,1,5,0,         1,'2020-01-01 13:28:01'),
(2,5,1,4,0,         1,'2020-01-01 13:29:01'),
(1,2,4,5,0,         1,'2020-01-01 13:30:01'),
(2,5,1,4,0,         1,'2020-01-01 13:31:01'),
(1,2,4,5,0,         1,'2020-01-01 13:32:01'),
(2,4,1,5,0,         1,'2020-01-01 13:33:01');

# week 7
insert into round (winner1_id, winner2_id, loser1_id, loser2_id, shutout, season_id, created)
values
(2,4,13,14,0,         1,'2020-01-01 14:01:01'),
(4,13,2,14,0,         1,'2020-01-01 14:02:01'),
(2,13,4,14,0,         1,'2020-01-01 14:03:01'),
(2,4,13,14,0,         1,'2020-01-01 14:04:01'),
(2,13,4,14,0,         1,'2020-01-01 14:05:01'),
(2,14,4,13,0,         1,'2020-01-01 14:06:01');
# ---------------------------------------
alter table cata.player
    add tid varchar(20) default null;
alter table cata.player
    add cid varchar(20) default null;
alter table cata.player
    add admin boolean default false;

update cata.player
set player.tid='530809403',
    player.admin = 1
where player.surname = 'маюн';